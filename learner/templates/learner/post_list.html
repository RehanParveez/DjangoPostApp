<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>All Posts</title>
</head>
<body>

<h1>{{ page_title }}</h1>

{% if user.is_authenticated %}
<form action="{% url 'logout' %}" method="post" style="display:inline;">
    {% csrf_token %}
    <button type="submit">Logout</button>
</form>
{% else %}
<a href="{% url 'login' %}">Login</a>
{% endif %}

{% for post in posts %}
    <h2><a href="{% url 'post_detail' post.slug %}">{{ post.title }}</a></h2>
    <p><a href="{% url 'post_detail' post.slug %}">Detail</a></p>
    <p><a href="{% url 'post_update' post.slug %}">Update</a></p>
    <p><a href="{% url 'post_delete' post.slug %}">Delete</a></p>
    <p>{{ post.description|truncatewords:20 }}</p>
    <p>{{ post.created_at }}</p>
    <br>
    <hr>
{% empty %}
    <p>No posts found</p>
{% endfor %}

<a href="{% url 'post_create' %}">Create New Post</a>

</body>
</html>
